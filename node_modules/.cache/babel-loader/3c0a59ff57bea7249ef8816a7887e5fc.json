{"ast":null,"code":"import _slicedToArray from\"/Users/denniswells/Desktop/Projects/feedback-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from\"react\";import Card from\"./shared/Card\";import Button from\"./shared/Button\";import RatingSelect from\"./RatingSelect\";import FeedbackContext from\"../context/FeedbackContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),btnDisabled=_useState6[0],setBtnDisabled=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){if(text===''){setBtnDisabled(true);setMessage(null);}else if(text!==''&&text.trim().length<=10){setBtnDisabled(true);setMessage('Text must be at least 10 characters');}else{setMessage(null);setBtnDisabled(false);}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}setText('');}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",version:\"primary\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["useState","useContext","useEffect","Card","Button","RatingSelect","FeedbackContext","FeedbackForm","text","setText","rating","setRating","btnDisabled","setBtnDisabled","message","setMessage","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedback","id"],"sources":["/Users/denniswells/Desktop/Projects/feedback-ui/src/components/FeedbackForm.jsx"],"sourcesContent":["import { useState, useContext, useEffect } from \"react\"\nimport Card from \"./shared/Card\"\nimport Button from \"./shared/Button\"\nimport RatingSelect from \"./RatingSelect\"\nimport FeedbackContext from \"../context/FeedbackContext\"\n\n\nfunction FeedbackForm() {\n    const [text, setText] = useState('')\n    const [rating, setRating] = useState(10)\n    const [btnDisabled, setBtnDisabled] = useState(true)\n    const [message, setMessage] = useState('')\n\n    const { addFeedback, feedbackEdit, updateFeedback } = useContext(FeedbackContext)\n\n    useEffect(() => {\n        if (feedbackEdit.edit === true) {\n            setBtnDisabled(false)\n            setText(feedbackEdit.item.text)\n            setRating(feedbackEdit.item.rating)\n        }\n    }, [feedbackEdit])\n\n\n    const handleTextChange = (e) => {\n        if (text === '') {\n            setBtnDisabled(true)\n            setMessage(null)\n        } else if (text !== '' && text.trim().length <= 10) {\n            setBtnDisabled(true)\n            setMessage('Text must be at least 10 characters')\n        } else {\n            setMessage(null)\n            setBtnDisabled(false)\n        }\n        setText(e.target.value)\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n        if (text.trim().length > 10) {\n            const newFeedback = {\n                text,\n                rating\n            }\n\n            if (feedbackEdit.edit === true) {\n                updateFeedback(feedbackEdit.item.id, newFeedback)\n            } else {\n                addFeedback(newFeedback)\n            }\n\n            setText('')\n        }\n    }\n\n    return (\n        <Card>\n            <form onSubmit={handleSubmit}>\n                <h2>How would you rate your service with us?</h2>\n                {/* rating select component */}\n                <RatingSelect select={(rating) => setRating(rating)} />\n                <div className=\"input-group\">\n                    <input\n                        onChange={handleTextChange}\n                        type=\"text\"\n                        placeholder=\"Write a review\"\n                        value={text}\n                    />\n                    <Button type='submit'\n                        version='primary'\n                        isDisabled={btnDisabled}>\n                        Send\n                    </Button>\n\n                </div>\n                {message && <div className=\"message\">{message}</div>}\n            </form>\n        </Card>\n    )\n}\n\nexport default FeedbackForm\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}